<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Чат Рудої Панди - Випадковий чат</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="Випадковий і безтолковий чат від Рудої Панди. Анонімне спілкування тетатет непойми з ким і неясно для чого. Сором на ваші голови!" />
        <meta name="keywords" content="чат, chat, український чат, чат рулетка, анонімний чат, без реєстрації, Тернопіль, спілкування" />
        <meta name="robots" content="index,follow" />
        <meta name="distribution" content="global" />
        <meta name="rating" content="general" />	
        <meta name="theme-color" content="#fefff6" />
        <link rel="shortcut icon" href="favicon.ico" />
        <link rel="canonical" href="http://random.board.te.ua/"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <meta property="fb:app_id" content="683537281826626" />
        <meta property="og:image" content="https://board.te.ua/upload/logo_facebook.png" />
        <meta property="og:title" content="Чат Рудої Панди | Випадковий чат рулетка" />
        <meta property="og:description" content="Випадковий і безтолковий чат від Рудої Панди. Анонімне спілкування тетатет непойми з ким і неясно для чого. Сором на ваші голови!" />
        <meta property="og:url" content="https://random.board.te.ua/" />
        <meta property="og:site_name" content="Чат Рудої Панди - Випадковий чат" />
        <meta property="og:type" content="website" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"  crossorigin="anonymous">
        <link rel="stylesheet" href="css/style.css">
       <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"  crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script> 
        <script src="js/RandomChat.js"></script>
    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light  static-top">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img width="32" height="32" src="https://board.te.ua/upload/orange.png" title="Чат Рудої Панди - рулетка" alt="Чат Рудої Панди  - рулетка">
                    <h1>Випадковий чат</h1>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">

                        <li class="nav-item">
                            <a class="nav-link" target="_blank" href="https://board.te.ua/">Великий чат</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" target="_blank" href="https://weekdays.te.ua">Форум</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="userCount" href="#"></a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>

        <!-- Page Content -->
        <div class="container-fluid" id="chat">
        </div>
        <!-- /.container -->

        <script>
            (function () {
                var url = "ws://" + window.location.host;
                if (url.match(/:\d+$/)) {
                    url = url.substr(0, url.lastIndexOf(":"));
                }
                var chat = new RandomChat(url + ":8091");
                document.getElementById("chat").appendChild(chat.window());

                resize();
                window.addEventListener('resize', function (event) {
                    resize();
                    console.log(event);
                });

                function resize() {
                    var h = window.innerHeight - document.getElementsByClassName("input-wraper")[0].offsetHeight - document.getElementsByClassName("navbar")[0].offsetHeight;
                    console.log(document.getElementsByClassName("input-wraper")[0].offsetHeight);
                    document.getElementsByClassName("chat-log-wraper")[0].style.height = h + "px";

                }

                var token = '';
                var pinger = setInterval(function () {
                    $(document).ready(function () {
                        $.ajax({
                            cache: false,
                            data: {
                                token: token
                            },
                            timeout: 2500,
                            type: 'GET',
                            url: 'dist/pinger.php',
                            dataType: 'json',
                            success: function (data, status, jqXHR) {
                                $('#userCount').text(data.userCount);
                                token = data.token;
                            }
                        });

                    }, 5000);
                });

            })();
        </script>
    </body>
</html>
